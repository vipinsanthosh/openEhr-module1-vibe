---
description: 
globs: 
alwaysApply: true
---
POST a flat openEHR composition

curl --location 'http://localhost:8090/ehrbase/rest/openehr/v1/ehr/1a3f846c-7e4a-4f51-8ebf-502f7445ef67/composition?templateId=Basic_Vitals_Dominique.v2' \
--header 'Accept: application/openehr.wt.flat.schema+json' \
--header 'Content-Type: application/openehr.wt.flat.schema+json' \
--header 'Prefer: return=representation' \
--data '{
    [[Flat composition]]
}'

Update a flat composition

curl --location --request PUT 'https://openehr-bootcamp.medblocks.com/ehrbase/rest/openehr/v1/ehr/[[ehr_id]]/composition/[[composition_id]]?templateId=[[template_id]]' \
--header 'Accept: application/openehr.wt.flat.schema+json' \
--header 'Content-Type: application/openehr.wt.flat.schema+json' \
--header 'Prefer: return=representation' \
--header 'If-Match;' \
--data '{
     [[FLAT COMPOSITION]] [[FLAT COMPOSITION]]
}'

Listing the created compositions using AQL

curl --location 'https://openehr-bootcamp.medblocks.com/ehrbase/rest/openehr/v1/query/aql' \
--header 'Accept: application/json' \
--header 'Content-Type: application/json' \
--data '{"q": "SELECT c/uid/value from EHR e CONTAINS COMPOSITION c WHERE c/archetype_details/template_id/value ='\''[[template_id]]'\'' AND e/ehr_id/value='\''[[ehr_id]]'\''"}'

Deleting a compositon

curl --location --request DELETE 'https://openehr-bootcamp.medblocks.com/ehrbase/rest/openehr/v1/ehr/[[ehr_id]]/composition/[[versioned_composition_id]]' \
--header 'Accept: application/json' \
--header 'Content-Type: application/json' \
--header 'Prefer: return=representation' \
